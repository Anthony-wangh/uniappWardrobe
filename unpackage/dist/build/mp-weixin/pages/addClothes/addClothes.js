"use strict";const e=require("../../common/vendor.js"),r={components:{CategoryPicker:()=>"../../components/CategoryPickerModal.js"},data:()=>({statusBarHeight:0,form:{id:"",image:"",name:"",primaryCategory:"",secondaryCategory:"",value:"",notes:"",purchaseDate:"",brand:""},categories:{"上衣":["T恤","衬衫","外套","羽绒服"],"裤子":["牛仔裤","运动裤","休闲裤","裙子"],"鞋":["运动鞋","高跟鞋","靴子","皮鞋","休闲鞋","拖鞋"],"配饰":["帽子","眼镜","丝巾"],"包":["单肩包","双肩包"]},errorMsg:"",isEdit:!1,showSubFromgroup:!1}),onLoad(){this.statusBarHeight=e.index.getSystemInfoSync().statusBarHeight},methods:{openCategoryPicker(){var e;null==(e=this.$refs.categoryPicker)||e.open()},onCategoryConfirm(e){this.form.primaryCategory=e.main,this.form.secondaryCategory=e.sub,console.log("用户选择了：",e)},chooseImage(){e.index.chooseImage({count:1,sourceType:["album","camera"],success:e=>{this.form.image=e.tempFilePaths[0]}})},selectPurchaseDate(e){this.form.purchaseDate=e.detail.value},generateUniqueId:()=>"id_"+Date.now().toString(36)+Math.random().toString(36).substr(2,5),submitForm(){if(!this.form.image)return this.errorMsg="请上传衣服图片";if(!this.form.name)return this.errorMsg="请输入衣服名称";if(!this.form.primaryCategory)return this.errorMsg="请选择一级类目";if(!this.form.secondaryCategory)return this.errorMsg="请选择二级类目";let r=e.index.getStorageSync("clothes")||[];if(this.isEdit){let e=r.findIndex((e=>e.id===this.form.id));-1!==e?r[e]=this.form:(this.form.id=this.generateUniqueId(),r.push(this.form))}else this.form.id=this.generateUniqueId(),r.push(this.form);e.index.setStorageSync("clothes",r),e.index.showToast({title:this.isEdit?"修改成功":"上传成功",icon:"success"}),this.resetForm(),setTimeout((()=>e.index.navigateBack()),100)},resetForm(){this.form={image:"",name:"",primaryCategory:"",secondaryCategory:"",value:"",notes:"",purchaseDate:"",brand:""},this.errorMsg=""}}};if(!Array){e.resolveComponent("category-picker")()}const o=e._export_sfc(r,[["render",function(r,o,t,a,s,i){return e.e({a:s.statusBarHeight+"px",b:s.form.image},s.form.image?{c:s.form.image}:{},{d:e.o(((...e)=>i.chooseImage&&i.chooseImage(...e))),e:s.form.name,f:e.o((e=>s.form.name=e.detail.value)),g:e.t(s.form.primaryCategory&&s.form.secondaryCategory?s.form.primaryCategory+" / "+s.form.secondaryCategory:"请选择类目（必选）"),h:e.o(((...e)=>i.openCategoryPicker&&i.openCategoryPicker(...e))),i:s.form.notes,j:e.o((e=>s.form.notes=e.detail.value)),k:e.t(s.showSubFromgroup?"收起":"更多"),l:e.o((e=>s.showSubFromgroup=!s.showSubFromgroup)),m:s.showSubFromgroup},s.showSubFromgroup?{n:e.t(s.form.purchaseDate||"请选择购买时间"),o:e.o(((...e)=>i.selectPurchaseDate&&i.selectPurchaseDate(...e))),p:s.form.value,q:e.o((e=>s.form.value=e.detail.value)),r:s.form.brand,s:e.o((e=>s.form.brand=e.detail.value))}:{},{t:e.o(((...e)=>i.submitForm&&i.submitForm(...e))),v:s.errorMsg},s.errorMsg?{w:e.t(s.errorMsg)}:{},{x:e.sr("categoryPicker","fa3d44ef-0"),y:e.o(i.onCategoryConfirm),z:e.p({data:s.categories,defaultValue:["上衣","T恤"],cancelText:"关闭",confirmText:"选择"})})}],["__scopeId","data-v-fa3d44ef"]]);wx.createPage(o);
