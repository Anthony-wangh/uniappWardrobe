"use strict";const e=require("../../common/vendor.js"),t=require("../../components/theme.js"),o=require("../../common/assets.js"),s={data:()=>({currentMainCategoryIndex:0,categories:["上衣","裤子","鞋","配饰","包"],subCategories:{"上衣":["T恤","衬衫","外套","羽绒服"],"裤子":["牛仔裤","运动裤","休闲裤","裙子"],"鞋":["运动鞋","板鞋","高跟鞋","靴子"],"配饰":["帽子","眼镜","丝巾"],"包":["单肩包","双肩包"]},clothes:[],isSubCollapsed:{},isEditMode:!1,selectedClothes:[],theme:t.themes[0],themes:t.themes}),computed:{currentSubCategories(){const e=this.categories[this.currentMainCategoryIndex];return this.subCategories[e]||[]}},onShow(){const t=e.index.getStorageSync("theme")||this.themes[0];this.theme=t,this.clothes=e.index.getStorageSync("clothes")||[],this.currentSubCategories.forEach((e=>{this.$set(this.isSubCollapsed,e,!1)}))},watch:{currentMainCategoryIndex(){const e=this.currentSubCategories;this.isSubCollapsed={},e.forEach((e=>{this.$set(this.isSubCollapsed,e,!1)}))}},methods:{getTabStyle(e){const t={padding:"10px",fontSize:"14px",color:this.theme.textColor};return e===this.currentMainCategoryIndex&&(t.color=this.theme.highlightTextColor,t.fontWeight="bold"),t},selectMainCategory(e){this.currentMainCategoryIndex=e},toggleSubCollapse(e){this.$set(this.isSubCollapsed,e,!this.isSubCollapsed[e])},getClothesForSub(e){const t=this.categories[this.currentMainCategoryIndex];return this.clothes.filter((o=>o.primaryCategory===t&&o.secondaryCategory===e))},getClothesForMain(e){return this.clothes.filter((t=>t.primaryCategory===e))},getRows(e){const t=[];for(let o=0;o<e.length;o+=3)t.push(e.slice(o,o+3));return t},onFloatingButtonClick(){e.index.navigateTo({url:"/pages/addClothes/addClothes"})},toggleEditMode(){this.isEditMode=!this.isEditMode,this.isEditMode?e.index.hideTabBar():(e.index.showTabBar(),this.selectedClothes=[])},toggleSelectClothes(e){const t=this.selectedClothes.indexOf(e);t>-1?this.selectedClothes.splice(t,1):this.selectedClothes.push(e)},deleteSelected(){0!==this.selectedClothes.length&&(this.clothes=this.clothes.filter((e=>!this.selectedClothes.includes(e))),this.selectedClothes=[],this.saveClothes())},matchSelected(){if(this.selectedClothes.length<=0)return void e.index.showToast({title:"至少选择一件衣物进行搭配",icon:"none"});const t=encodeURIComponent(JSON.stringify(this.selectedClothes));this.isEditMode&&this.toggleEditMode(),setTimeout((()=>{e.index.navigateTo({url:`/pages/addMatching/addMatching?clothes=${t}`})}),100)},saveClothes(){e.index.setStorageSync("clothes",this.clothes)},getAllItemsWithAdd(e){const t=this.categories[this.currentMainCategoryIndex],o=this.clothes.filter((o=>o.primaryCategory===t&&o.secondaryCategory===e));return[{isAdd:!0,primaryCategory:t,secondaryCategory:e},...o]},onAddItemClick(t){this.isEditMode&&this.toggleEditMode(),setTimeout((()=>{e.index.navigateTo({url:`/pages/addClothes/addClothes?primaryCategory=${encodeURIComponent(t.primaryCategory)}&secondaryCategory=${encodeURIComponent(t.secondaryCategory)}`})}),100)}}};const i=e._export_sfc(s,[["render",function(t,s,i,r,d,l){return e.e({a:d.theme.textColor,b:e.t(d.isEditMode?"完成":"选择"),c:e.o(((...e)=>l.toggleEditMode&&l.toggleEditMode(...e))),d:d.theme.highlightTextColor,e:e.f(d.categories,((t,o,s)=>({a:e.t(t),b:e.t(l.getClothesForMain(t).length),c:o,d:d.currentMainCategoryIndex===o?1:"",e:e.o((e=>l.selectMainCategory(o)),o),f:e.s(l.getTabStyle(o))}))),f:`linear-gradient(135deg, ${d.theme.primaryColor}, ${d.theme.secondaryColor})`,g:e.f(l.currentSubCategories,((t,s,i)=>e.e({a:e.t(t),b:e.t(l.getClothesForSub(t).length),c:e.t(d.isSubCollapsed[t]?"展开":"收起"),d:e.o((e=>l.toggleSubCollapse(t)),t),e:!d.isSubCollapsed[t]},d.isSubCollapsed[t]?{}:e.e({f:0===l.getClothesForSub(t).length},0===l.getClothesForSub(t).length?{g:o._imports_0,h:e.o((e=>l.onAddItemClick({primaryCategory:d.categories[d.currentMainCategoryIndex],secondaryCategory:t})),t)}:{i:e.f(l.getRows(l.getAllItemsWithAdd(t)),((t,s,i)=>({a:e.f(t,((t,s,i)=>e.e({a:t.isAdd},t.isAdd?{b:o._imports_0}:e.e({c:d.isEditMode},d.isEditMode?{d:d.selectedClothes.includes(t)?"/static/checked.png":"/static/unChecked.png",e:e.o((e=>l.toggleSelectClothes(t)),s)}:{},{f:t.image,g:e.t(t.name)}),{h:s,i:t.isAdd?1:"",j:e.o((e=>t.isAdd?l.onAddItemClick(t):null),s)}))),b:s})))}),{j:t}))),h:d.theme.highlightTextColor,i:d.isEditMode},d.isEditMode?{j:o._imports_1,k:e.o(((...e)=>l.deleteSelected&&l.deleteSelected(...e))),l:o._imports_2,m:e.o(((...e)=>l.matchSelected&&l.matchSelected(...e)))}:{})}],["__scopeId","data-v-cb5f1643"]]);wx.createPage(i);
