"use strict";const e=require("../../common/vendor.js"),t=require("../../common/assets.js"),o={data:()=>({currentSeasonIndex:0,seasons:["全部","春","夏","秋","冬"],currentCategoryIndex:0,categories:[{name:"全部"},{name:"工作通勤"},{name:"运动休闲"},{name:"精致约会"},{name:"出游"}],coordinates:[],showModal:!1,newCategoryName:"",errorMsg:"",filteredClothes:[],filteredClothesRows:[]}),onShow(){this.coordinates=e.index.getStorageSync("outfits")||[];const t=e.index.getStorageSync("coordinatesCategories");t&&(this.categories=t),this.filteredClothesBycategory()},methods:{filteredClothesBycategory(){const e=this.seasons[this.currentSeasonIndex],t=this.categories[this.currentCategoryIndex].name;0!==this.coordinates.length&&(this.filteredClothes="全部"===e&&"全部"===t?this.coordinates:"全部"===e?this.coordinates.filter((e=>e.secondaryCategory===t)):"全部"===t?this.coordinates.filter((t=>t.primaryCategory===e)):this.coordinates.filter((o=>o.primaryCategory===e&&o.secondaryCategory===t)),this.filteredClothesWithRows())},filteredClothesWithRows(){const e=[];let t=[];this.filteredClothes.forEach(((o,s)=>{o&&(t.push(o),1!==t.length&&s!==this.filteredClothes.length-1||(e.push([...t]),t=[]))})),this.filteredClothesRows=e.filter((e=>e.length>0))},selectSeason(e){this.currentSeasonIndex=e,this.filteredClothesBycategory()},selectCategory(e){this.currentCategoryIndex=e,this.filteredClothesBycategory()},showAddCategoryModal(){this.showModal=!0,this.newCategoryName="",this.errorMsg=""},closeModal(){this.showModal=!1},addCategory(){const t=this.newCategoryName.trim();t?t.length>10?this.errorMsg="不得超过10个字符":this.categories.some((e=>e.name===t))?this.errorMsg="该类目已存在，请输入其他名称":(this.categories.push({name:t}),e.index.setStorageSync("coordinatesCategories",this.categories),this.showModal=!1,e.index.showToast({title:"添加类目成功！",icon:"success"})):this.errorMsg="类目名称不能为空"},onFloatingButtonClick(){getApp().globalData.wardrobeData={editMode:!0},e.index.switchTab({url:"/pages/wardrobe/wardrobe"})},confirmDeleteCategory(t){0!==t?e.index.showModal({title:"确定要删除？",success:e=>{e.confirm?this.deleteCategory(t):e.cancel&&console.log("用户点击取消")}}):e.index.showToast({title:"默认类目不可删除",icon:"none"})},deleteCategory(t){null!==t&&(this.categories.splice(t,1),this.currentCategoryIndex=0,this.filteredClothesBycategory(),e.index.setStorageSync("coordinatesCategories",this.categories)),e.index.showToast({title:"删除成功",icon:"success"})},editClothes(e){}}};const s=e._export_sfc(o,[["render",function(o,s,r,a,i,n){return e.e({a:e.f(i.seasons,((t,o,s)=>({a:e.t(t),b:o,c:i.currentSeasonIndex===o?1:"",d:e.o((e=>n.selectSeason(o)),o),e:e.o((e=>n.confirmDeleteCategory(o)),o)}))),b:e.f(i.categories,((t,o,s)=>({a:e.t(t.name),b:o,c:i.currentCategoryIndex===o?1:"",d:e.o((e=>n.selectCategory(o)),o),e:e.o((e=>n.confirmDeleteCategory(o)),o)}))),c:t._imports_0$1,d:e.o(((...e)=>n.showAddCategoryModal&&n.showAddCategoryModal(...e))),e:0===i.filteredClothesRows.length},0===i.filteredClothesRows.length?{f:t._imports_1$2}:{g:e.f(i.filteredClothesRows,((t,o,s)=>({a:e.f(t,((t,o,s)=>({a:t.image,b:e.t(t.name),c:o,d:e.o((e=>n.editClothes(t)),o)}))),b:e.f(1-((null==t?void 0:t.length)||0),((e,t,o)=>({a:"placeholder"+t}))),c:o})))},{h:i.showModal},i.showModal?e.e({i:i.newCategoryName,j:e.o((e=>i.newCategoryName=e.detail.value)),k:i.errorMsg},i.errorMsg?{l:e.t(i.errorMsg)}:{},{m:e.o(((...e)=>n.closeModal&&n.closeModal(...e))),n:e.o(((...e)=>n.addCategory&&n.addCategory(...e)))}):{},{o:t._imports_0$1,p:e.o(((...e)=>n.onFloatingButtonClick&&n.onFloatingButtonClick(...e)))})}],["__scopeId","data-v-e140855b"]]);wx.createPage(s);
