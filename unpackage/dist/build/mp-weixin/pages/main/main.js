"use strict";const e=require("../../common/vendor.js"),t=require("../../common/assets.js"),a={components:{PrivacyCheck:()=>"../../components/PrivacyCheck.js"},data:()=>({nickName:"帅哥",usingDate:99,weatherDetail:"",weatherTips:"",weatherInfo:{},clothingAdvice:{}}),onShow(){this.getWeather()},methods:{isToday(e){const[t,a,s]=e.split("-").map(Number),r=new Date(t,a-1,s),c=new Date;return r.getFullYear()===c.getFullYear()&&r.getMonth()===c.getMonth()&&r.getDate()===c.getDate()},async getWeather(){const t=e.index.getStorageSync("weatherInfo");if(t&&this.isToday(t.fxDate))return this.weatherInfo=t,void this.updateWeather(t);e.index.getLocation({type:"wgs84",success:t=>{const a=t.latitude,s=`${t.longitude},${a}`;e.wx$1.request({url:"https://nd3tefcedt.re.qweatherapi.com/v7/weather/3d",data:{location:s,key:"38c34a465f6f4afa9e15de9954fc542c"},success:t=>{const a=t.data.daily[0];e.index.setStorageSync("weatherInfo",a),this.weatherInfo=a,this.updateWeather(a),console.log(a)},fail:e=>{console.error("获取天气失败:",e)}})},fail:e=>{console.error("获取位置信息失败",e)}})},updateWeather(e){const t=e.textDay+"  "+e.tempMin+"℃ ~ "+e.tempMax+"℃",a=`${e.windDirDay}  ${e.windScaleDay}级  紫外线等级: ${e.uvIndex}`;this.weatherDetail=`${t}\n${a}`,this.clothingAdvice=this.getClothingAdvice(e),this.weatherTips=this.clothingAdvice.summary},clickWardrobe(){e.index.navigateTo({url:"/pages/wardrobe/wardrobe"})},clickSuit(){e.index.navigateTo({url:"/pages/matching/matching"})},getClothingAdvice(e){const t=parseInt(e.tempMax)||0,a=parseInt(e.tempMin)||0,s=(t+a)/2,r=t-a,c=[{max:-10,level:"extremeCold",name:"极寒"},{max:0,level:"severeCold",name:"严寒"},{max:10,level:"cold",name:"寒冷"},{max:16,level:"chilly",name:"微寒"},{max:22,level:"cool",name:"凉爽"},{max:28,level:"comfortable",name:"舒适"},{max:32,level:"warm",name:"炎热"},{max:1/0,level:"hot",name:"酷热"}].find((e=>s<=e.max));let i={level:c.name,upper:[],lower:[],accessories:[],tips:[],specialNotes:[]};switch(c.level){case"extremeCold":i.upper=["加厚羽绒服","防风冲锋衣","高领羊毛衫","保暖内衣"],i.lower=["加绒加厚棉裤","保暖秋裤","羊毛裤"],i.accessories=["毛线帽","围巾","加厚手套","雪地靴"],i.tips.push("避免皮肤直接暴露在空气中");break;case"severeCold":i.upper=["长款羽绒服","毛衣+大衣","抓绒内搭"],i.lower=["加厚毛呢裤","保暖打底裤"],i.accessories=["针织帽","围巾","保暖手套"];break;case"cold":i.upper=["短款羽绒服","羊毛大衣","厚卫衣"],i.lower=["加绒牛仔裤","灯芯绒裤子"],i.accessories=["薄围巾","耳罩"],i.tips.push("注意手脚保暖");break;case"chilly":i.upper=["风衣","针织开衫","薄毛衣"],i.lower=["普通牛仔裤","休闲裤"],i.accessories=["薄外套备用"];break;case"cool":i.upper=["长袖衬衫","卫衣","薄外套"],i.lower=["卡其裤","薄款牛仔裤"],i.accessories=["丝巾装饰"],i.tips.push("适合叠穿搭配");break;case"comfortable":i.upper=["短袖T恤","POLO衫","薄衬衫"],i.lower=["九分裤","短裙+打底袜"],i.accessories=["防晒衣备用"];break;case"warm":i.upper=["透气短袖","背心","雪纺上衣"],i.lower=["短裤","薄款连衣裙"],i.accessories=["遮阳帽","太阳镜"],i.tips.push("选择透气速干面料");break;case"hot":i.upper=["吊带衫","无袖上衣","真丝衬衫"],i.lower=["超短裤","凉感面料裙装"],i.accessories=["UV防晒伞","冰袖"],i.tips.push("尽量避免正午外出")}return this.applyWeatherEffects(i,e),r>8&&(i.specialNotes.push(`昼夜温差大（${r}℃），建议采用洋葱式穿衣法`),i.accessories.push("便携外套")),{...i,summary:this.generateAdviceSummary(i,e)}},applyWeatherEffects(e,t){t.textDay.includes("雨")&&(e.accessories.push("雨伞"),e.upper.unshift("防水外套"),parseInt(t.windScaleDay)>3&&e.specialNotes.push("风雨较大，建议穿防滑鞋")),parseInt(t.windScaleDay)>=4&&(e.upper=e.upper.map((e=>e.includes("外套")?`防风${e}`:e)),e.accessories.push("防风眼镜")),t.textDay.includes("晴")&&(e.accessories.push("防晒霜"),parseInt(t.tempMax)>25&&e.tips.push("建议选择浅色系衣物"))},generateAdviceSummary(e,t){const a=[];return t.tempMin,t.tempMax,e.upper.length&&a.push(`- 上衣：${e.upper.join(" / ")}`),e.lower.length&&a.push(`- 下装：${e.lower.join(" / ")}`),e.accessories.length&&a.push(`-️ 配饰：${e.accessories.join("、")}`),e.specialNotes.length&&a.push(`- 注意：${e.specialNotes.join("；")}`),e.tips.length&&a.push(`- 小贴士：${e.tips.join("；")}`),`天气${e.level}\n${a.join("\n")}`}}};if(!Array){e.resolveComponent("PrivacyCheck")()}const s=e._export_sfc(a,[["render",function(a,s,r,c,i,o){return{a:e.t(i.nickName),b:e.t(i.usingDate),c:t._imports_0,d:e.o(((...e)=>o.clickWardrobe&&o.clickWardrobe(...e))),e:t._imports_1,f:e.o(((...e)=>o.clickSuit&&o.clickSuit(...e))),g:e.t(i.weatherDetail),h:e.t(i.weatherTips)}}],["__scopeId","data-v-0d5e2a6f"]]);wx.createPage(s);
