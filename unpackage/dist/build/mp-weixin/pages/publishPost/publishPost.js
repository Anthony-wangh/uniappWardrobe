"use strict";const e=require("../../common/vendor.js"),t=require("../../components/theme.js"),s={data:()=>({newPost:{user:"我",content:"",images:[],likeCount:0,commentCount:0,liked:!1,favorited:!1},theme:t.themes[0],themes:t.themes}),onLoad(){const t=e.index.getStorageSync("theme")||this.themes[0];this.theme=t},methods:{goBack(){e.index.navigateBack()},chooseImage(){e.index.chooseImage({count:9-this.newPost.images.length,success:e=>{this.newPost.images.push(...e.tempFilePaths)}})},publishPost(){if(!this.newPost.content&&0===this.newPost.images.length)return void e.index.showToast({title:"请输入内容或选择图片",icon:"none"});const t=e.index.getStorageSync("posts")||[];t.unshift(JSON.parse(JSON.stringify(this.newPost))),e.index.setStorageSync("posts",t),e.index.navigateBack()}}};const o=e._export_sfc(s,[["render",function(t,s,o,n,i,a){return e.e({a:e.o(((...e)=>a.goBack&&a.goBack(...e))),b:i.newPost.content,c:e.o((e=>i.newPost.content=e.detail.value)),d:e.f(i.newPost.images,((e,t,s)=>({a:t,b:e}))),e:i.newPost.images.length<9},i.newPost.images.length<9?{f:e.o(((...e)=>a.chooseImage&&a.chooseImage(...e)))}:{},{g:e.o(((...e)=>a.publishPost&&a.publishPost(...e))),h:i.theme.primaryColor})}],["__scopeId","data-v-4762cc3e"]]);wx.createPage(o);
