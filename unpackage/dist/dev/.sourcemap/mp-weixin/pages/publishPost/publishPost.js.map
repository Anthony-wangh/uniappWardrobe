{"version":3,"file":"publishPost.js","sources":["pages/publishPost/publishPost.vue","D:/HBuilderX.4.45.2025010502/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvcHVibGlzaFBvc3QvcHVibGlzaFBvc3QudnVl"],"sourcesContent":["// PublishPost.vue\r\n<template>\r\n\t<view class=\"publish-container\">\r\n\t\t<view class=\"header\">\r\n\t\t\t<text class=\"header-back\" @click=\"goBack\">返回</text>\r\n\t\t\t<text class=\"header-title\">发布动态</text>\r\n\t\t\t<text class=\"header-empty\"></text>\r\n\t\t</view>\r\n\t\t<view class=\"publish-section\">\r\n\t\t\t<textarea v-model=\"newPost.content\" placeholder=\"说点什么...\" class=\"publish-input\" />\r\n\t\t\t<view class=\"image-picker\">\r\n\t\t\t\t<image v-for=\"(img, idx) in newPost.images\" :key=\"idx\" :src=\"img\" class=\"picked-image\"\r\n\t\t\t\t\tmode=\"aspectFill\" />\r\n\t\t\t\t<view v-if=\"newPost.images.length < 9\" class=\"add-image-btn\" @click=\"chooseImage\">\r\n\t\t\t\t\t+\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<button class=\"publish-btn\" @click=\"publishPost\" :style=\"{ background: theme.primaryColor}\">发布</button>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport {\r\n\t\tthemes\r\n\t} from '@/components/theme.js'\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tnewPost: {\r\n\t\t\t\t\tuser: '我',\r\n\t\t\t\t\tcontent: '',\r\n\t\t\t\t\timages: [],\r\n\t\t\t\t\tlikeCount: 0,\r\n\t\t\t\t\tcommentCount: 0,\r\n\t\t\t\t\tliked: false,\r\n\t\t\t\t\tfavorited: false,\t\t\t\t\t\r\n\t\t\t\t},\r\n\t\t\t\ttheme: themes[0],\r\n\t\t\t\tthemes,\r\n\t\t\t};\r\n\t\t},\r\n\t\tonLoad() {\r\n\t\t\tconst saved = uni.getStorageSync('theme') || this.themes[0];\r\n\t\t\tthis.theme = saved;\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tgoBack() {\r\n\t\t\t\tuni.navigateBack();\r\n\t\t\t},\r\n\t\t\tchooseImage() {\r\n\t\t\t\tuni.chooseImage({\r\n\t\t\t\t\tcount: 9 - this.newPost.images.length,\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tthis.newPost.images.push(...res.tempFilePaths);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tpublishPost() {\r\n\t\t\t\tif (!this.newPost.content && this.newPost.images.length === 0) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '请输入内容或选择图片',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tconst posts = uni.getStorageSync('posts') || [];\r\n\t\t\t\tposts.unshift(JSON.parse(JSON.stringify(this.newPost)));\r\n\t\t\t\tuni.setStorageSync('posts', posts);\r\n\t\t\t\tuni.navigateBack();\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n</script>\r\n\r\n<style scoped>\r\n\t.publish-container {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\theight: 100vh;\r\n\t\tbackground: #f5f5f5;\r\n\t}\r\n\r\n\t.header {\r\n\t\tbackground-color: #ffffff;\r\n\t\tbox-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\r\n\t\tpadding-top: calc(var(--status-bar-height) + 30px);\r\n\t\tpadding-bottom: 10px;\r\n\t\talign-items: center;\r\n\t\tjustify-content: space-between;\r\n\t\tposition: relative;\r\n\t\theight: 40px;\r\n\t}\r\n\r\n\t.header-back,\r\n\t.header-empty {\r\n\t\tcolor: #fff;\r\n\t\twidth: 50px;\r\n\t\ttext-align: center;\r\n\t}\r\n\r\n\t.header-title {\r\n\t\tfont-size: 18px;\r\n\t\tfont-weight: bold;\r\n\t\ttext-align: center;\r\n\t\tposition: absolute;\r\n\t\tleft: 50%;\r\n\t\ttransform: translateX(-50%);\r\n\t}\r\n\r\n\t.publish-section {\r\n\t\tbackground: #fff;\r\n\t\tpadding: 10px;\r\n\t\tflex: 1;\r\n\t}\r\n\r\n\t.publish-input {\r\n\t\twidth: 100%;\r\n\t\tmin-height: 80px;\r\n\t\tborder: 1px solid #ddd;\r\n\t\tborder-radius: 4px;\r\n\t\tpadding: 8px;\r\n\t\tbox-sizing: border-box;\r\n\t}\r\n\r\n\t.image-picker {\r\n\t\tdisplay: flex;\r\n\t\tflex-wrap: wrap;\r\n\t\tmargin-top: 8px;\r\n\t}\r\n\r\n\t.picked-image,\r\n\t.add-image-btn {\r\n\t\twidth: 60px;\r\n\t\theight: 60px;\r\n\t\tmargin-right: 8px;\r\n\t\tmargin-bottom: 8px;\r\n\t\tborder: 1px dashed #ccc;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t}\r\n\r\n\t.publish-btn {\r\n\t\tmargin-top: 6px;\r\n\t\tbackground: #4b5bb4;\r\n\t\tcolor: #fff;\r\n\t\tpadding: 8px;\r\n\t\tborder-radius: 4px;\r\n\t\ttext-align: center;\r\n\t}\r\n</style>","import MiniProgramPage from 'E:/GitProject/uniappWardrobe/pages/publishPost/publishPost.vue'\nwx.createPage(MiniProgramPage)"],"names":["themes","uni"],"mappings":";;;AA0BC,MAAK,YAAU;AAAA,EACd,OAAO;AACN,WAAO;AAAA,MACN,SAAS;AAAA,QACR,MAAM;AAAA,QACN,SAAS;AAAA,QACT,QAAQ,CAAE;AAAA,QACV,WAAW;AAAA,QACX,cAAc;AAAA,QACd,OAAO;AAAA,QACP,WAAW;AAAA,MACX;AAAA,MACD,OAAOA,iBAAM,OAAC,CAAC;AAAA,MACf,QAAAA,iBAAM;AAAA;EAEP;AAAA,EACD,SAAS;AACR,UAAM,QAAQC,cAAG,MAAC,eAAe,OAAO,KAAK,KAAK,OAAO,CAAC;AAC1D,SAAK,QAAQ;AAAA,EACb;AAAA,EACD,SAAS;AAAA,IACR,SAAS;AACRA,oBAAG,MAAC,aAAY;AAAA,IAChB;AAAA,IACD,cAAc;AACbA,oBAAAA,MAAI,YAAY;AAAA,QACf,OAAO,IAAI,KAAK,QAAQ,OAAO;AAAA,QAC/B,SAAS,CAAC,QAAQ;AACjB,eAAK,QAAQ,OAAO,KAAK,GAAG,IAAI,aAAa;AAAA,QAC9C;AAAA,MACD,CAAC;AAAA,IACD;AAAA,IACD,cAAc;AACb,UAAI,CAAC,KAAK,QAAQ,WAAW,KAAK,QAAQ,OAAO,WAAW,GAAG;AAC9DA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,QACP,CAAC;AACD;AAAA,MACD;AACA,YAAM,QAAQA,cAAG,MAAC,eAAe,OAAO,KAAK,CAAA;AAC7C,YAAM,QAAQ,KAAK,MAAM,KAAK,UAAU,KAAK,OAAO,CAAC,CAAC;AACtDA,oBAAAA,MAAI,eAAe,SAAS,KAAK;AACjCA,oBAAG,MAAC,aAAY;AAAA,IACjB;AAAA,EACD;;;;;;;;;;;;;;;;;;;;;;ACtEF,GAAG,WAAW,eAAe;"}