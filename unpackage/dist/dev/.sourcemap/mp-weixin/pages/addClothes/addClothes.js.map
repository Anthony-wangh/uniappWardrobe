{"version":3,"file":"addClothes.js","sources":["pages/addClothes/addClothes.vue","D:/HBuilderX.4.45.2025010502/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvYWRkQ2xvdGhlcy9hZGRDbG90aGVzLnZ1ZQ"],"sourcesContent":["<template>\n  <view>\n    <!-- 状态栏占位 -->\n    <view class=\"status-bar\" :style=\"{ height: statusBarHeight + 'px' }\"></view>\n    <!-- 页面标题 -->\n    <view class=\"header\">\n      <text class=\"header-title\">添加衣物</text>\n    </view>\n\n    <view class=\"add-clothes-container\">\n      <!-- 图片选择区域 -->\n      <view class=\"image-picker\" @click=\"chooseImage\">\n        <image v-if=\"form.image\" :src=\"form.image\" class=\"selected-image\" />\n        <text v-else class=\"upload-text\">点击选择图片</text>\n      </view>\n\n      <!-- 名称输入 -->\n      <view class=\"form-group\">\n        <label>名称</label>\n        <input class=\"input-field\" v-model=\"form.name\" placeholder=\"请输入衣服名称（必填）\" />\n      </view>\n\n      <!-- 类目选择 -->\n      <view class=\"form-group\">\n        <label>分类</label>\n        <view class=\"category-selector\">\n          <scroll-view class=\"left-menu\" scroll-y>\n            <view\n              v-for=\"(item, index) in primaryCategories\"\n              :key=\"index\"\n              :class=\"['menu-item', { active: currentPrimaryIndex === index }]\"\n              @click=\"selectPrimaryCategory(index)\"\n            >\n              {{ item }}\n            </view>\n          </scroll-view>\n          <scroll-view class=\"right-menu\" scroll-y>\n            <view\n              v-for=\"(item, index) in secondaryCategories[currentPrimaryCategory]\"\n              :key=\"index\"\n              class=\"sub-item\"\n              @click=\"selectSecondaryCategory(item)\"\n            >\n              {{ item }}\n            </view>\n          </scroll-view>\n        </view>\n      </view>\n\n      <!-- 其他表单项 -->\n      <view class=\"form-group\">\n        <label>购买时间</label>\n        <picker mode=\"date\" @change=\"selectPurchaseDate\" class=\"picker\">\n          <view class=\"picker-text\">{{ form.purchaseDate || \"请选择购买时间\" }}</view>\n        </picker>\n      </view>\n\n      <view class=\"form-group\">\n        <label>价值</label>\n        <input class=\"input-field\" v-model=\"form.value\" type=\"digit\" placeholder=\"请输入价值（可选）\" />\n      </view>\n\n      <view class=\"form-group\">\n        <label>品牌</label>\n        <input class=\"input-field\" v-model=\"form.brand\" placeholder=\"请输入品牌（可选）\" />\n      </view>\n\n      <view class=\"form-group\">\n        <label>备注</label>\n        <textarea class=\"textarea-field\" v-model=\"form.notes\" placeholder=\"请输入备注（可选）\"></textarea>\n      </view>\n\n      <button class=\"submit-btn\" @click=\"submitForm\">保存</button>\n      <text class=\"error-msg\" v-if=\"errorMsg\">{{ errorMsg }}</text>\n    </view>\n  </view>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      statusBarHeight: 0,\n      form: {\n        id: '',\n        image: '',\n        name: '',\n        primaryCategory: '',\n        secondaryCategory: '',\n        value: '',\n        notes: '',\n        purchaseDate: '',\n        brand: ''\n      },\n      primaryCategories: ['上衣', '裤子', '鞋', '配饰', '包'],\n      secondaryCategories: {\n        上衣: ['T恤', '衬衫', '外套', '羽绒服'],\n        裤子: ['牛仔裤', '运动裤', '休闲裤', '裙子'],\n        鞋: ['运动鞋', '高跟鞋', '靴子', '皮鞋', '休闲鞋', '拖鞋'],\n        配饰: ['帽子', '眼镜', '丝巾'],\n        包: ['手提包', '双肩包', '斜挎包', '钱包']\n      },\n      currentPrimaryIndex: 0,\n      currentPrimaryCategory: '上衣',\n      errorMsg: '',\n      isEdit: false\n    };\n  },\n  onLoad() {\n    this.statusBarHeight = uni.getSystemInfoSync().statusBarHeight;\n  },\n  methods: {\n    chooseImage() {\n      uni.chooseImage({\n        count: 1,\n        sourceType: ['album', 'camera'],\n        success: res => {\n          this.form.image = res.tempFilePaths[0];\n        }\n      });\n    },\n    selectPrimaryCategory(index) {\n      this.currentPrimaryIndex = index;\n      this.currentPrimaryCategory = this.primaryCategories[index];\n      this.form.primaryCategory = this.primaryCategories[index];\n      this.form.secondaryCategory = '';\n    },\n    selectSecondaryCategory(item) {\n      this.form.secondaryCategory = item;\n    },\n    selectPurchaseDate(e) {\n      this.form.purchaseDate = e.detail.value;\n    },\n    generateUniqueId() {\n      return 'id_' + Date.now().toString(36) + Math.random().toString(36).substr(2, 5);\n    },\n    submitForm() {\n      if (!this.form.image) return (this.errorMsg = '请上传衣服图片');\n      if (!this.form.name) return (this.errorMsg = '请输入衣服名称');\n      if (!this.form.primaryCategory) return (this.errorMsg = '请选择一级类目');\n      if (!this.form.secondaryCategory) return (this.errorMsg = '请选择二级类目');\n\n      let clothes = uni.getStorageSync('clothes') || [];\n\n      if (this.isEdit) {\n        let index = clothes.findIndex(item => item.id === this.form.id);\n        if (index !== -1) clothes[index] = this.form;\n        else {\n          this.form.id = this.generateUniqueId();\n          clothes.push(this.form);\n        }\n      } else {\n        this.form.id = this.generateUniqueId();\n        clothes.push(this.form);\n      }\n\n      uni.setStorageSync('clothes', clothes);\n      uni.showToast({ title: this.isEdit ? '修改成功' : '上传成功', icon: 'success' });\n\n      this.resetForm();\n      setTimeout(() => uni.navigateBack(), 100);\n    },\n    resetForm() {\n      this.form = {\n        image: '',\n        name: '',\n        primaryCategory: '',\n        secondaryCategory: '',\n        value: '',\n        notes: '',\n        purchaseDate: '',\n        brand: ''\n      };\n      this.errorMsg = '';\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\">\n.status-bar {\n  width: 100%;\n  background-color: #ffffff;\n}\n.header {\n  width: 100%;\n  height: 44px;\n  background-color: #ffffff;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-bottom: 1px solid #eee;\n}\n.header-title {\n  font-size: 18px;\n  font-weight: bold;\n  color: #333;\n}\n.add-clothes-container {\n  width: 100%;\n  padding: 20px 30px;\n  box-sizing: border-box;\n  background-color: #f5f5f5;\n}\n.image-picker {\n  width: 100%;\n  height: 180px;\n  background-color: #e0e0e0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 10px;\n  margin-bottom: 20px;\n  cursor: pointer;\n}\n.selected-image {\n  width: 100%;\n  height: 100%;\n  border-radius: 10px;\n  object-fit: cover;\n}\n.upload-text {\n  color: #666;\n  font-size: 16px;\n}\n.form-group {\n  margin-bottom: 20px;\n  label {\n    display: block;\n    font-size: 15px;\n    font-weight: bold;\n    color: #666;\n    margin-bottom: 5px;\n  }\n  .input-field,\n  .picker {\n    width: 100%;\n    height: 45px;\n    padding: 0 15px;\n    border: 1px solid #e0e0e0;\n    border-radius: 8px;\n    background-color: #ffffff;\n    font-size: 14px;\n    color: #333;\n    box-sizing: border-box;\n    display: flex;\n    align-items: center;\n  }\n  .textarea-field {\n    width: 100%;\n    height: 80px;\n    padding: 10px;\n    border: 1px solid #e0e0e0;\n    border-radius: 8px;\n    background-color: #ffffff;\n    font-size: 14px;\n    color: #333;\n    resize: none;\n    box-sizing: border-box;\n  }\n}\n.category-selector {\n  display: flex;\n  height: 180px;\n  border: 1px solid #e0e0e0;\n  border-radius: 8px;\n  overflow: hidden;\n  background-color: #fff;\n}\n.left-menu {\n  width: 30%;\n  background-color: #f7f7f7;\n}\n.right-menu {\n  width: 70%;\n  background-color: #ffffff;\n}\n.menu-item {\n  padding: 15px;\n  text-align: center;\n  font-size: 14px;\n}\n.menu-item.active {\n  background-color: #e6f0ff;\n  font-weight: bold;\n  color: #007aff;\n}\n.sub-item {\n  padding: 15px;\n  border-bottom: 1px solid #f0f0f0;\n  font-size: 14px;\n}\n.submit-btn {\n  width: 100%;\n  background-color: #d0e183;\n  color: #fff;\n  font-size: 16px;\n  text-align: center;\n  border: none;\n  border-radius: 5px;\n  cursor: pointer;\n  padding: 10px 0;\n  &:active {\n    background-color: #bac875;\n  }\n}\n.error-msg {\n  color: red;\n  font-size: 14px;\n  text-align: center;\n  margin-top: 10px;\n}\n</style>\n","import MiniProgramPage from 'E:/GitProject/uniappWardrobe/pages/addClothes/addClothes.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni"],"mappings":"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"}