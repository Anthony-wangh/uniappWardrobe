{"version":3,"file":"community.js","sources":["pages/community/community.vue","D:/HBuilderX.4.45.2025010502/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvY29tbXVuaXR5L2NvbW11bml0eS52dWU"],"sourcesContent":["<template>\r\n\t<view class=\"community-container\">\r\n\t\t<!-- Â§¥ÈÉ® -->\r\n\t\t<view class=\"header\" :style=\"{ background: `linear-gradient(135deg, ${theme.primaryColor}, ${theme.secondaryColor})` }\">\r\n\t\t\t<text class=\"header-title\" :style=\"{ color: theme.textColor }\">Á§æÂå∫</text>\r\n\t\t</view>\r\n\r\n\t\t<!-- Âä®ÊÄÅÂàóË°® -->\r\n\t\t<scroll-view class=\"feed-list\" scroll-y>\r\n\t\t\t<view v-for=\"(post, pIndex) in posts\" :key=\"pIndex\" class=\"post-card\">\r\n\t\t\t\t<view class=\"post-header\">\r\n\t\t\t\t\t<image src=\"/static/tabBarIcons/personal.png\" class=\"avatar\" mode=\"aspectFill\" />\r\n\t\t\t\t\t<text class=\"username\">{{ post.user }}</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<text class=\"post-content\">{{ post.content }}</text>\r\n\t\t\t\t<view class=\"post-images\">\r\n\t\t\t\t\t<view v-for=\"(img, idx) in post.images.slice(0, 9)\" :key=\"idx\" class=\"image-wrapper\"\r\n\t\t\t\t\t\t@click=\"previewImages(post.images, idx)\">\r\n\t\t\t\t\t\t<image :src=\"img\" mode=\"aspectFill\" class=\"post-image-fallback\" />\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<!-- ËØÑËÆ∫ÂàóË°® -->\r\n\t\t\t\t<view class=\"comments-section\">\r\n\t\t\t\t\t<view v-for=\"(comment, cIndex) in post.comments\" :key=\"cIndex\" class=\"comment-item\">\r\n\t\t\t\t\t\t<text>{{ comment.user }}: {{ comment.content }}</text>\r\n\t\t\t\t\t\t<text class=\"reply-btn\" @click=\"openReply(post, comment)\">ÂõûÂ§ç</text>\r\n\t\t\t\t\t\t<view v-for=\"(reply, rIndex) in comment.replies\" :key=\"rIndex\" class=\"reply-item\">\r\n\t\t\t\t\t\t\t<text>{{ reply.user }} ÂõûÂ§ç {{ comment.user }}: {{ reply.content }}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<!-- Êìç‰ΩúÊåâÈíÆ -->\r\n\t\t\t\t<view class=\"post-actions\">\r\n\t\t\t\t\t<view class=\"action\" @click=\"toggleLike(post)\">\r\n\t\t\t\t\t\t<text>{{ post.liked ? '‚ù§Ô∏è' : 'ü§ç' }} {{ post.likeCount }}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"action\" @click=\"openComment(post)\">\r\n\t\t\t\t\t\t<text>üí¨ ËØÑËÆ∫</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</scroll-view>\r\n\r\n\t\t<!-- ÂºπÂá∫ËæìÂÖ•Ê°Ü -->\r\n\t\t<comment-input-popup :visible=\"isPopupVisible\" @submit=\"handlePopupSubmit\" @close=\"isPopupVisible = false\" />\r\n\r\n\t\t<!-- Âè≥‰∏ãËßíÊ∑ªÂä†ÊåâÈíÆ -->\r\n\t\t<view class=\"floating-add-btn\" @click=\"goToPublish\" :style=\"{ background: theme.secondaryColor }\">\r\n\t\t\t<image src=\"/static/plus-l.png\" mode=\"aspectFit\" class=\"add-btn-image\"  />\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport CommentInputPopup from '@/components/CommentInputPopup.vue';\r\n\timport {themes} from '@/components/theme.js'\r\n\texport default {\r\n\t\tcomponents: {\r\n\t\t\tCommentInputPopup\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tposts: [],\r\n\t\t\t\tisPopupVisible: false,\r\n\t\t\t\tcurrentPost: null,\r\n\t\t\t\tcurrentComment: null,\r\n\t\t\t\ttheme: themes[0],\r\n\t\t\t\tthemes\r\n\t\t\t};\r\n\t\t},\r\n\t\tonShow() {\r\n\t\t\tconst saved = uni.getStorageSync('theme') || this.themes[0];\r\n\t\t\tthis.theme=saved;\r\n\t\t\t\r\n\t\t\tthis.posts = uni.getStorageSync('posts') || [];\r\n\t\t\t// ÂàùÂßãÂåñÊØè‰∏™ post ÁöÑ comments/replies\r\n\t\t\tthis.posts.forEach(post => {\r\n\t\t\t\tif (!post.comments) post.comments = [];\r\n\t\t\t\tpost.comments.forEach(comment => {\r\n\t\t\t\t\tif (!comment.replies) comment.replies = [];\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tgoToPublish() {\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '/pages/publishPost/publishPost'\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\ttoggleLike(post) {\r\n\t\t\t\tpost.liked = !post.liked;\r\n\t\t\t\tpost.likeCount += post.liked ? 1 : -1;\r\n\t\t\t\tuni.setStorageSync('posts', this.posts);\r\n\t\t\t},\r\n\t\t\topenComment(post) {\r\n\t\t\t\tthis.currentPost = post;\r\n\t\t\t\tthis.currentComment = null;\r\n\t\t\t\tthis.isPopupVisible = true;\r\n\t\t\t},\r\n\t\t\topenReply(post, comment) {\r\n\t\t\t\tthis.currentPost = post;\r\n\t\t\t\tthis.currentComment = comment;\r\n\t\t\t\tthis.isPopupVisible = true;\r\n\t\t\t},\r\n\t\t\thandlePopupSubmit(content) {\r\n\t\t\t\tif (!content) return;\r\n\r\n\t\t\t\tif (!this.currentPost.comments) {\r\n\t\t\t\t\tthis.$set(this.currentPost, 'comments', []);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.currentComment) {\r\n\t\t\t\t\tif (!this.currentComment.replies) {\r\n\t\t\t\t\t\tthis.$set(this.currentComment, 'replies', []);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.currentComment.replies.push({\r\n\t\t\t\t\t\tuser: 'Êàë',\r\n\t\t\t\t\t\tcontent\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.currentPost.comments.push({\r\n\t\t\t\t\t\tuser: 'Êàë',\r\n\t\t\t\t\t\tcontent,\r\n\t\t\t\t\t\treplies: []\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tuni.setStorageSync('posts', this.posts);\r\n\t\t\t\tthis.isPopupVisible = false;\r\n\t\t\t\tthis.currentPost = null;\r\n\t\t\t\tthis.currentComment = null;\r\n\t\t\t},\r\n\t\t\tpreviewImages(images, index) {\r\n\t\t\t\tuni.previewImage({\r\n\t\t\t\t\turls: images,\r\n\t\t\t\t\tcurrent: images[index]\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n</script>\r\n\r\n<style scoped>\r\n\t.community-container {\r\n\t\tflex: 1;\r\n\t\tbackground: #f5f5f5;\r\n\t\tposition: relative;\r\n\t}\r\n\r\n\t/* Âõ∫ÂÆöÂ§¥ÈÉ® */\r\n\t.header {\r\n\t\tpadding: 20px;\r\n\t\tbackground-color: #ffffff;\r\n\t\tbox-shadow: 0 1px 4px rgba(0, 0, 0, 0.1);\r\n\t\tpadding-top: calc(var(--status-bar-height) + 30px) ;\r\n\t\tposition: relative;\r\n\t\theight: 40px;\r\n\t}\r\n\r\n\t.header-title {\r\n\t\tfont-size: 18px;\r\n\t\tfont-weight: bold;\r\n\t\ttext-align: center;\r\n\t\tposition: absolute;\r\n\t\tleft: 50%;\r\n\t\ttransform: translateX(-50%);\r\n\t}\r\n\r\n\t/* ÁïôÂá∫Â§¥ÈÉ®È´òÂ∫¶ */\r\n\t.feed-list {\r\n\t\tflex: 1;\r\n\t\tmargin: 10px;\r\n\t\theight: calc(100vh - 120px);\r\n\t\twidth: calc(100vw - 20px);\r\n\t}\r\n\r\n\t/* Â∏ñÂ≠êÂç°ÁâáÊ†∑Âºè */\r\n\t.post-card {\r\n\t\tbackground: #fff;\r\n\t\tpadding: 12px 0px;\r\n\t\tborder-radius: 8px;\r\n\t\tmargin: 12px 0px;\r\n\t\tbox-shadow: 0 1px 4px rgba(0, 0, 0, 0.05);\r\n\t}\r\n\r\n\t/* Â§¥ÂÉèÂíåÁî®Êà∑Âêç */\r\n\t.post-header {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tmargin-bottom: 8px;\r\n\t}\r\n\r\n\t.avatar {\r\n\t\twidth: 36px;\r\n\t\theight: 36px;\r\n\t\tborder-radius: 18px;\r\n\t\tmargin-right: 10px;\r\n\t\tmargin-left: 10px;\r\n\t}\r\n\r\n\t.username {\r\n\t\tfont-weight: bold;\r\n\t\tfont-size: 15px;\r\n\t}\r\n\r\n\t/* Â∏ñÂ≠êÊñáÂ≠óÂÜÖÂÆπ */\r\n\t.post-content {\r\n\t\tmargin: 8px 0 10px 10px;\r\n\t\tline-height: 1.6;\r\n\t\tfont-size: 15px;\r\n\t}\r\n\r\n\t/* ÂõæÁâáÂå∫Âüü */\r\n\t.post-images {\r\n\t\tdisplay: flex;\r\n\t\tflex-wrap: wrap;\r\n\t\tgap: 6px;\r\n\t\tjustify-content: flex-start;\r\n\t\tmargin-top: 6px;\r\n\t}\r\n\r\n\t.image-wrapper {\r\n\t\twidth: calc((100% - 12px) / 3);\r\n\t\tpadding-bottom: calc((100% - 12px) / 3);\r\n\t\t/* ‰øùÊåÅÊ≠£ÊñπÂΩ¢ */\r\n\t\tposition: relative;\r\n\t\tborder-radius: 6px;\r\n\t\toverflow: hidden;\r\n\t}\r\n\r\n\t.post-image-fallback {\r\n\t\tposition: absolute;\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tobject-fit: cover;\r\n\t}\r\n\r\n\t/* ËØÑËÆ∫Âå∫Âüü */\r\n\t.comments-section {\r\n\t\tmargin-top: 10px;\r\n\t\tpadding-top: 8px;\r\n\t\tborder-top: 1px solid #f0f0f0;\r\n\t}\r\n\r\n\t.comment-item {\r\n\t\tmargin-bottom: 8px;\r\n\t\tfont-size: 14px;\r\n\t\tline-height: 1.5;\r\n\t}\r\n\r\n\t.reply-item {\r\n\t\tpadding-left: 20px;\r\n\t\tmargin-top: 4px;\r\n\t\tfont-size: 13px;\r\n\t\tcolor: #666;\r\n\t}\r\n\r\n\t.reply-btn {\r\n\t\tcolor: #4b5bb4;\r\n\t\tmargin-left: 8px;\r\n\t\tfont-size: 13px;\r\n\t}\r\n\r\n\t/* Êìç‰ΩúÊåâÈíÆ */\r\n\t.post-actions {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\tmargin-top: 10px;\r\n\t\tborder-top: 1px solid #eee;\r\n\t\tpadding-top: 10px;\r\n\t}\r\n\r\n\t.action {\r\n\t\tflex: 1;\r\n\t\ttext-align: center;\r\n\t\tfont-size: 15px;\r\n\t}\r\n\r\n\t/* Ê∑ªÂä†ÊåâÈíÆ */\r\n\t.floating-add-btn {\r\n\t\tposition: fixed;\r\n\t\tright: 20px;\r\n\t\tbottom: 40px;\r\n\t\twidth: 50px;\r\n\t\theight: 50px;\r\n\t\tbackground-color: #4b5bb4;\r\n\t\tborder-radius: 25px;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tbox-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\r\n\t\tz-index: 20;\r\n\t}\r\n\r\n\t.add-btn-image {\r\n\t\twidth: 30px;\r\n\t\theight: 30px;\r\n\t}\r\n</style>","import MiniProgramPage from 'E:/GitProject/uniappWardrobe/pages/community/community.vue'\nwx.createPage(MiniProgramPage)"],"names":["themes","uni"],"mappings":";;;;AAuDC,MAAO,oBAAmB,MAAW;AAErC,MAAK,YAAU;AAAA,EACd,YAAY;AAAA,IACX;AAAA,EACA;AAAA,EACD,OAAO;AACN,WAAO;AAAA,MACN,OAAO,CAAE;AAAA,MACT,gBAAgB;AAAA,MAChB,aAAa;AAAA,MACb,gBAAgB;AAAA,MAChB,OAAOA,iBAAM,OAAC,CAAC;AAAA,cACfA,iBAAK;AAAA;EAEN;AAAA,EACD,SAAS;AACR,UAAM,QAAQC,cAAG,MAAC,eAAe,OAAO,KAAK,KAAK,OAAO,CAAC;AAC1D,SAAK,QAAM;AAEX,SAAK,QAAQA,cAAG,MAAC,eAAe,OAAO,KAAK,CAAA;AAE5C,SAAK,MAAM,QAAQ,UAAQ;AAC1B,UAAI,CAAC,KAAK;AAAU,aAAK,WAAW,CAAA;AACpC,WAAK,SAAS,QAAQ,aAAW;AAChC,YAAI,CAAC,QAAQ;AAAS,kBAAQ,UAAU,CAAA;AAAA,MACzC,CAAC;AAAA,IACF,CAAC;AAAA,EACD;AAAA,EACD,SAAS;AAAA,IACR,cAAc;AACbA,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK;AAAA,MACN,CAAC;AAAA,IACD;AAAA,IACD,WAAW,MAAM;AAChB,WAAK,QAAQ,CAAC,KAAK;AACnB,WAAK,aAAa,KAAK,QAAQ,IAAI;AACnCA,oBAAAA,MAAI,eAAe,SAAS,KAAK,KAAK;AAAA,IACtC;AAAA,IACD,YAAY,MAAM;AACjB,WAAK,cAAc;AACnB,WAAK,iBAAiB;AACtB,WAAK,iBAAiB;AAAA,IACtB;AAAA,IACD,UAAU,MAAM,SAAS;AACxB,WAAK,cAAc;AACnB,WAAK,iBAAiB;AACtB,WAAK,iBAAiB;AAAA,IACtB;AAAA,IACD,kBAAkB,SAAS;AAC1B,UAAI,CAAC;AAAS;AAEd,UAAI,CAAC,KAAK,YAAY,UAAU;AAC/B,aAAK,KAAK,KAAK,aAAa,YAAY,CAAE,CAAA;AAAA,MAC3C;AAEA,UAAI,KAAK,gBAAgB;AACxB,YAAI,CAAC,KAAK,eAAe,SAAS;AACjC,eAAK,KAAK,KAAK,gBAAgB,WAAW,CAAE,CAAA;AAAA,QAC7C;AACA,aAAK,eAAe,QAAQ,KAAK;AAAA,UAChC,MAAM;AAAA,UACN;AAAA,QACD,CAAC;AAAA,aACK;AACN,aAAK,YAAY,SAAS,KAAK;AAAA,UAC9B,MAAM;AAAA,UACN;AAAA,UACA,SAAS,CAAC;AAAA,QACX,CAAC;AAAA,MACF;AAEAA,oBAAAA,MAAI,eAAe,SAAS,KAAK,KAAK;AACtC,WAAK,iBAAiB;AACtB,WAAK,cAAc;AACnB,WAAK,iBAAiB;AAAA,IACtB;AAAA,IACD,cAAc,QAAQ,OAAO;AAC5BA,oBAAAA,MAAI,aAAa;AAAA,QAChB,MAAM;AAAA,QACN,SAAS,OAAO,KAAK;AAAA,MACtB,CAAC;AAAA,IACF;AAAA,EACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC1IF,GAAG,WAAW,eAAe;"}