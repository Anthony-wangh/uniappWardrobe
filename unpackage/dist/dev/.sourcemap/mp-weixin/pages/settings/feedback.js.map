{"version":3,"file":"feedback.js","sources":["pages/settings/feedback.vue","D:/HBuilderX.4.45.2025010502/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvc2V0dGluZ3MvZmVlZGJhY2sudnVl"],"sourcesContent":["<template>\r\n\t<view class=\"container\">\r\n\r\n\t\t<!-- 导航栏 -->\r\n\t\t<view class=\"navbar\">\r\n\t\t\t<image class=\"back-icon\" src=\"/static/back.png\" @click=\"goBack\" />\r\n\t\t\t<text class=\"title\">意见反馈</text>\r\n\t\t</view>\r\n\r\n\t\t<!-- 反馈类型 -->\r\n\t\t<view class=\"section\">\r\n\t\t\t<view class=\"section-title\">反馈类型</view>\r\n\t\t\t<view class=\"type-grid\">\r\n\t\t\t\t<view v-for=\"(item, index) in types\" :key=\"index\"\r\n\t\t\t\t\t:class=\"['type-btn', selectedType === item ? 'active' : '']\" @click=\"selectedType = item\">\r\n\t\t\t\t\t{{ item }}\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- 问题描述 -->\r\n\t\t<view class=\"section\">\r\n\t\t\t<view class=\"section-title required\">问题描述</view>\r\n\t\t\t<textarea v-model=\"description\" placeholder=\"请详细描述您遇到的问题或建议（最多500字）\" maxlength=\"500\"\r\n\t\t\t\tclass=\"textarea\"></textarea>\r\n\t\t</view>\r\n\r\n\r\n\t\t<!-- 联系方式 -->\r\n\t\t<view class=\"section\">\r\n\t\t\t<view class=\"section-title\">联系方式(选填)</view>\r\n\t\t\t<input v-model=\"contact\" placeholder=\"请留下您的微信号或邮箱\" class=\"input\" />\r\n\t\t</view>\r\n\r\n\t\t<!-- 提交按钮 -->\r\n\t\t<button class=\"submit-btn\" @click=\"submitForm\">提交反馈</button>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\ttypes: ['功能建议','缺陷', '操作问题', '体验问题', '其他问题'],\r\n\t\t\t\tselectedType: '功能建议',\r\n\t\t\t\tdescription: '',\r\n\t\t\t\tcontact: '',\r\n\t\t\t};\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tgoBack() {\r\n\t\t\t\tuni.navigateBack();\r\n\t\t\t},\r\n\t\t\tsubmitForm() {\r\n\t\t\t\tif (!this.description.trim()) {\r\n\t\t\t\t\treturn uni.showToast({\r\n\t\t\t\t\t\ttitle: '请填写问题描述',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tconst userInfo = uni.getStorageSync('wardrobeUserInfo');\r\n\t\t\t\tif(!userInfo)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t// 模拟提交逻辑，可改为云函数或后台接口\r\n\t\t\t\tconsole.log({\r\n\t\t\t\t\tuserId: userInfo.openid,\r\n\t\t\t\t\ttype: this.selectedType,\r\n\t\t\t\t\tdescription: this.description,\r\n\t\t\t\t\tcontact: this.contact,\r\n\t\t\t\t});\r\n\t\t\t\tconst feed = {\r\n\t\t\t\t\tuserId: userInfo.openid,\r\n\t\t\t\t\ttype: this.selectedType,\r\n\t\t\t\t\tdescription: this.description,\r\n\t\t\t\t\tcontact: this.contact,\r\n\t\t\t\t};\r\n\t\t\t\t\r\n\t\t\t\tthis.upload(feed);\r\n\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\tupload(feedBack) {\r\n\t\t\t\tuniCloud.callFunction({\r\n\t\t\t\t\tname: 'feedBack',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tfeedBack: feedBack,\r\n\t\t\t\t\t}\r\n\t\t\t\t}).then((result) => {\r\n\t\t\t\t\tif (result.result.code === 200) {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '提交成功',\r\n\t\t\t\t\t\t\ticon: 'success'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t// 重置表单\r\n\t\t\t\t\t\tthis.description = '';\r\n\t\t\t\t\t\tthis.contact = '';\r\n\t\t\t\t\t\tthis.selectedType = '功能建议';\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: result.result.msg,\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch((err) => {\r\n\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '调用云函数失败',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t\tconsole.error('云函数错误：', err);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t};\r\n</script>\r\n\r\n<style scoped>\r\n\t.container {\r\n\t\twidth: 100vw;\r\n\t\theight: 100vh;\r\n\t\tjustify-items: center;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t}\r\n\r\n\t/* 顶部栏 */\r\n\t.navbar {\r\n\t\twidth: 100%;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tpadding: 12px 0px;\r\n\t\tbackground-color: #fff;\r\n\t\tborder-bottom: 1px solid #e5e5e5;\r\n\r\n\t\tpadding-top: calc(var(--status-bar-height) + 40px);\r\n\t}\r\n\r\n\t.back-icon {\r\n\t\twidth: 24px;\r\n\t\theight: 24px;\r\n\t\tmargin-right: 12px;\r\n\t\tmargin-left: 20px;\r\n\t}\r\n\r\n\t.title {\r\n\t\tfont-size: 18px;\r\n\t\tfont-weight: bold;\r\n\t\tcolor: #333;\r\n\t}\r\n\r\n\t.section {\r\n\t\tmargin-top: 40rpx;\r\n\t\tmargin: 40rpx 10px 0 10px;\r\n\t}\r\n\r\n\t.section-title {\r\n\t\tfont-size: 30rpx;\r\n\t\tmargin-bottom: 12rpx;\r\n\t\tcolor: #333;\r\n\t}\r\n\r\n\t.section-title.required::after {\r\n\t\tcontent: '*';\r\n\t\tcolor: red;\r\n\t\tmargin-left: 8rpx;\r\n\t}\r\n\r\n\t.type-grid {\r\n\t\tdisplay: flex;\r\n\t\tflex-wrap: wrap;\r\n\t\tgap: 20rpx;\r\n\t}\r\n\r\n\t.type-btn {\r\n\t\tpadding: 16rpx 32rpx;\r\n\t\tborder: 1px solid #ccc;\r\n\t\tborder-radius: 12rpx;\r\n\t\tcolor: #333;\r\n\t}\r\n\r\n\t.type-btn.active {\r\n\t\tborder-color: #8A6FDF;\r\n\t\tcolor: #8A6FDF;\r\n\t\tbackground-color: #ffffff;\r\n\t}\r\n\r\n\t.textarea {\r\n\t\twidth: calc(100% - 20px);\r\n\t\tmin-height: 160rpx;\r\n\t\tborder: 1px solid #ddd;\r\n\t\tborder-radius: 12rpx;\r\n\t\tfont-size: 28rpx;\r\n\t\tpadding: 10px;\r\n\t}\r\n\r\n\t.input {\r\n\t\twidth: calc(100% - 20px);\r\n\t\tborder: 1px solid #ddd;\r\n\t\tborder-radius: 12rpx;\r\n\t\tfont-size: 28rpx;\r\n\t\tpadding: 10px;\r\n\t}\r\n\r\n\t.upload-btn {\r\n\t\twidth: 180rpx;\r\n\t\theight: 180rpx;\r\n\t\tborder: 1px dashed #ccc;\r\n\t\tborder-radius: 12rpx;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t}\r\n\r\n\t.submit-btn {\r\n\t\tmargin-top: 60rpx;\r\n\t\tbackground-color: #8A6FDF;\r\n\t\tcolor: #fff;\r\n\t\tborder-radius: 12rpx;\r\n\t\tfont-size: 32rpx;\r\n\t\tmargin: 60rpx 10px 0 10px;\r\n\t}\r\n</style>","import MiniProgramPage from 'E:/GitProject/uniappWardrobe/pages/settings/feedback.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","uniCloud"],"mappings":";;;AAwCC,MAAK,YAAU;AAAA,EACd,OAAO;AACN,WAAO;AAAA,MACN,OAAO,CAAC,QAAO,MAAM,QAAQ,QAAQ,MAAM;AAAA,MAC3C,cAAc;AAAA,MACd,aAAa;AAAA,MACb,SAAS;AAAA;EAEV;AAAA,EACD,SAAS;AAAA,IACR,SAAS;AACRA,oBAAG,MAAC,aAAY;AAAA,IAChB;AAAA,IACD,aAAa;AACZ,UAAI,CAAC,KAAK,YAAY,QAAQ;AAC7B,eAAOA,cAAAA,MAAI,UAAU;AAAA,UACpB,OAAO;AAAA,UACP,MAAM;AAAA,QACP,CAAC;AAAA,MACF;AACA,YAAM,WAAWA,cAAAA,MAAI,eAAe,kBAAkB;AACtD,UAAG,CAAC;AACH;AAGDA,0BAAA,MAAA,OAAA,qCAAY;AAAA,QACX,QAAQ,SAAS;AAAA,QACjB,MAAM,KAAK;AAAA,QACX,aAAa,KAAK;AAAA,QAClB,SAAS,KAAK;AAAA,MACf,CAAC;AACD,YAAM,OAAO;AAAA,QACZ,QAAQ,SAAS;AAAA,QACjB,MAAM,KAAK;AAAA,QACX,aAAa,KAAK;AAAA,QAClB,SAAS,KAAK;AAAA;AAGf,WAAK,OAAO,IAAI;AAAA,IAGhB;AAAA,IACD,OAAO,UAAU;AAChBC,oBAAAA,GAAS,aAAa;AAAA,QACrB,MAAM;AAAA,QACN,MAAM;AAAA,UACL;AAAA,QACD;AAAA,MACD,CAAC,EAAE,KAAK,CAAC,WAAW;AACnB,YAAI,OAAO,OAAO,SAAS,KAAK;AAC/BD,wBAAAA,MAAI,UAAU;AAAA,YACb,OAAO;AAAA,YACP,MAAM;AAAA,UACP,CAAC;AAED,eAAK,cAAc;AACnB,eAAK,UAAU;AACf,eAAK,eAAe;AAAA,eACd;AACNA,wBAAAA,MAAI,UAAU;AAAA,YACb,OAAO,OAAO,OAAO;AAAA,YACrB,MAAM;AAAA,UACP,CAAC;AAAA,QACF;AAAA,MACD,CAAC,EAAE,MAAM,CAAC,QAAQ;AACjBA,sBAAG,MAAC,YAAW;AACfA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,QACP,CAAC;AACDA,iFAAc,UAAU,GAAG;AAAA,MAC5B,CAAC;AAAA,IACF;AAAA,EACA;;;;;;;;;;;;;;;;;;;;;;AChHH,GAAG,WAAW,eAAe;"}